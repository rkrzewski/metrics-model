# Scala model of Dropwizard Metrics

The purpose of this project is to provide a model of [Dropwizard Metrics](https://github.com/dropwizard/metrics)
as a family of Scala case classes a facility for decoding JSON representation
of those, generated by [`metrics-json` module](https://github.com/dropwizard/metrics/tree/3.2-development/metrics-json)
and another facility for encoding their contents into [InfluxDB](https://docs.influxdata.com/influxdb/v0.13/) [line protocol](https://docs.influxdata.com/influxdb/v0.13/)

## Tools used

* [Circe](https://github.com/travisbrown/circe) for JSON parsing
* [Shapeless](https://github.com/milessabin/shapeless) for conversion to line protocol
* [ScalaTest](http://www.scalatest.org/) for running tests

Many thanks to Alec Zorab and Miles Sabin for answering my questions on gitter!

## Caveats

In Dropwizard Metrics, the most general metric type, `Gauge` is parametric in
the type of it's value. This means that JSON representation of it provided by
`metrics-json` may contain arbitrary JSON data. Since the intended target of
the data is InfluxDB, only a limited set of gauge data types is sensible. At
this point, JSON parser supports only numeric (arbitrary precision) gauges,
and gauges that contain (possibly empty) list of strings. This second type
is used by [`metrics-jvm` module](https://github.com/dropwizard/metrics/tree/3.2-development/metrics-jvm) to report thread deadlocks.
